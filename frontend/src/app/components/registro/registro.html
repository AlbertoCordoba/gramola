<div class="registro-container">
  <div class="registro-card">
    
    <div *ngIf="!enviado">
      <h2>Crear Cuenta</h2>
      <p>nete a Gramola Virtual</p>

      <form (ngSubmit)="onRegistro()">
        <div class="form-group">
          <label>Nombre del Bar</label>
          <input type="text" [(ngModel)]="registroData.nombre" name="nombre" placeholder="Bar Manolo" required [disabled]="cargando">
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="registroData.email" name="email" placeholder="hola@bar.com" required [disabled]="cargando">
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label>Contrase帽a</label>
            <input type="password" [(ngModel)]="registroData.password" name="password" required [disabled]="cargando">
          </div>
          <div class="form-group half">
            <label>Repetir</label>
            <input type="password" [(ngModel)]="registroData.confirmPassword" name="confirmPassword" required [disabled]="cargando">
          </div>
        </div>

        <div class="form-group location-box">
          <label>Ubicaci贸n <span *ngIf="registroData.latitud">(Lat: {{ registroData.latitud | number:'1.3-3' }})</span></label>
          <button type="button" class="btn-geo" (click)="obtenerUbicacion()" [disabled]="cargando">
            {{ registroData.latitud ? ' Ubicaci贸n Detectada' : ' Detectar Ubicaci贸n' }}
          </button>
        </div>

        <div class="form-group canvas-container">
          <label class="canvas-title">Firma del Propietario</label>
          <canvas #firmaCanvas width="400" height="150"></canvas>
          <button type="button" class="btn-clear" (click)="limpiarFirma()" [disabled]="cargando">Borrar Firma</button>
        </div>

        <div *ngIf="errorMessage" class="msg error">{{ errorMessage }}</div>

        <button type="submit" class="btn-submit" [disabled]="cargando" [class.btn-loading]="cargando">
          {{ cargando ? 'Registrando...' : 'Registrarse' }}
        </button>
      </form>

      <div class="footer-links">
        <p>驴Ya tienes cuenta? <a routerLink="/login">Inicia sesi贸n</a></p>
      </div>
    </div>

    <div *ngIf="enviado" class="success-view fade-in">
      <div class="icon-rocket"></div>
      <h2>隆Bienvenido a bordo!</h2>
      <p>Hemos enviado un correo de confirmaci贸n a <br><strong>{{ registroData.email }}</strong>.</p>
      <p>Por favor, revisa tu bandeja de entrada.</p>
      
      <div class="redirect-box">
        <p>Redirigiendo al login...</p>
        <div class="loading-bar"></div>
      </div>
    </div>

  </div>
</div>