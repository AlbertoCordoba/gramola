<div class="gramola-container">
  <header>
    <h1>üéµ Gramola Virtual</h1>
    <div class="user-info" *ngIf="usuario">
      <span>{{ usuario.nombre }}</span>
      <button (click)="logout()" class="btn-logout">Salir</button>
    </div>
  </header>

  <main>
    <div class="dashboard-content">
      
      <div *ngIf="!spotifyConnected" class="spotify-card">
        <h3>Conectar M√∫sica</h3>
        <button (click)="connectSpotify()" class="btn-spotify">Conectar con Spotify</button>
      </div>
      
      <div *ngIf="spotifyConnected" class="search-section">
        <input type="text" [(ngModel)]="busqueda" (keyup.enter)="search()" placeholder="Buscar canci√≥n..." class="search-input">
        <button (click)="search()" class="btn-search">Buscar</button>
      </div>
      
      <div *ngIf="searchResults.length > 0" class="results-grid">
        <h4>Resultados</h4>
        <div class="song-card" *ngFor="let track of searchResults">
          <div class="song-info">
            <h5>{{ track.name }}</h5>
            <p>{{ track.artists[0].name }}</p> 
          </div>
          <button (click)="anadir(track)" class="btn-pay">A√±adir (0.50 ‚Ç¨)</button>
        </div>
      </div>
      
      <div class="queue-section">
        <h3>Cola de Reproducci√≥n</h3>
        <div *ngIf="colaReproduccion.length === 0" class="empty-state">La cola est√° vac√≠a.</div>
        <ul class="queue-list">
          <li *ngFor="let item of colaReproduccion; let i = index">
            <span class="queue-number">#{{ i + 1 }}</span>
            <span class="queue-title">{{ item.titulo }} - {{ item.artista }}</span>
          </li>
        </ul>
      </div>

    </div>
  </main>
</div>